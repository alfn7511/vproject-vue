webpackJsonp([21],{452:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s(665),a=s(666),o=s(11),r=o(e.a,a.a,null,null,null);i.default=r.exports},665:function(t,i,s){"use strict";var e=s(140),a=s(139);i.a={name:"service",props:["id"],components:{ContentHeader:e.a,cSwitch:a.a},data:function(){return{name:"Service 상세",originItems:{},serviceName:"",items:{ipRestrictUseYn:!1,ipRestrictServiceList:[{ip:""}],createDateTime:"",createId:"",modifyDateTime:"",modifyId:"",modifyHistReason:"등록"},code:{ipRestriction:[]},history:{fields:{createId:{label:"등록/수정자",class:"text-left"},histBeginDateTime:{label:"등록/수정일시"},modifyHistReason:{label:"변경이력",class:"text-left"},histMgmtId:{label:"보기"}},items:[]},isCreate:!1,isEdit:!1,isModalHistory:!1,deploy:{status:!0,count:11234}}},created:function(){var t=this,i=this.$route.query.histories,s=void 0!==i?"/services/"+this.id+"/restriction/histories/"+i:"/services/"+this.id+"/restriction";i&&document.querySelector("body.app").classList.add("history-mode"),this.$https.get("/services/"+this.id).then(function(i){t.serviceName=i.data.items.serviceName}),this.$https.get("/policy/ipRestriction").then(function(i){t.code.ipRestriction=i.data.items.ipRestrictGlobal}),this.$https.get(s).then(function(i){t.items=i.data.items,t.originItems=JSON.parse(JSON.stringify(t.items))}).catch(function(i){t.isCreate=!0,t.isEdit=!0})},methods:{onEdit:function(){this.isEdit=!0},onView:function(){this.isEdit=!1,this.items=JSON.parse(JSON.stringify(this.originItems))},onAddRestrict:function(){this.items.ipRestrictServiceList.push({ip:""})},onDelRestrict:function(t){this.items.ipRestrictServiceList.splice(t,1)},onSubmit:function(){var t=this,i=this.items,s=i.ipRestrictUseYn,e=i.ipRestrictServiceList,a=i.modifyHistReason,o={ipRestrictUseYn:s,ipRestrictServiceList:e,modifyHistReason:a};this.isCreate?this.$https.post("/services/"+this.id+"/restriction",o).then(function(){t.$router.go(t.$router.currentRoute)}).catch(function(t){console.log(t)}):this.$https.put("/services/"+this.id+"/restriction",o).then(function(){t.$router.go(t.$router.currentRoute)}).catch(function(t){console.log(t)})},getHistoryLink:function(t){return"#/service/service/"+this.id+"/ip?histories="+t},showHistory:function(){var t=this;this.isModalHistory=!this.isModalHistory,this.$https.get("/services/"+this.id+"/restriction/histories").then(function(i){t.history.items=i.data.items})}}}},666:function(t,i,s){"use strict";var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"animated fadeIn"},[s("content-header",{attrs:{title:t.serviceName,name:t.name}}),t._v(" "),s("div",{staticClass:"collapse-title"},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formDefault",modifiers:{formDefault:!0}}],attrs:{variant:"secondary",block:!0}},[t._v("\n      IP Restriction\n      "),s("i",{staticClass:"fa fa-angle-down"})])],1),t._v(" "),s("b-collapse",{attrs:{id:"formDefault",visible:""}},[s("b-card",[s("b-form-fieldset",{attrs:{label:"사용여부","label-cols":3,horizontal:!0}},[t.isEdit?s("c-switch",t._b({attrs:{type:"icon",variant:"success",pill:!0},model:{value:t.items.ipRestrictUseYn,callback:function(i){t.items.ipRestrictUseYn=i},expression:"items.ipRestrictUseYn"}},"c-switch",{on:"",off:""},!1)):s("b-badge",{attrs:{pill:"",variant:t.items.ipRestrictUseYn?"success":"secondary"}},[t._v("\n          "+t._s(t.items.ipRestrictUseYn?"사용":"미사용")+"\n        ")])],1),t._v(" "),t.items.ipRestrictUseYn?s("b-form-fieldset",{attrs:{label:"제한 IP(공통)","label-cols":3,horizontal:!0}},[s("ul",{staticClass:"icons-list list-view"},t._l(t.code.ipRestriction,function(i,e){return s("li",[s("i",{staticClass:"bg-primary"},[t._v(t._s(i.ipRestrictGlobalSeq))]),t._v(" "),s("div",{staticClass:"desc"},[s("small",[t._v("서버 IP 주소")]),t._v(" "),s("div",{staticClass:"title"},[s("span",[t._v(t._s(i.ip))])])])])}))]):t._e(),t._v(" "),t.items.ipRestrictUseYn?s("b-form-fieldset",{attrs:{description:"※ 공통으로 제한되는 IP 주소는 Policy 메뉴에서 수정할 수 있습니다.<br>\n        ※ 사용여부를 ‘미사용’으로 설정하시더라도 공통으로 설정된 IP주소는 제한됩니다.","label-cols":3,horizontal:!0}},[s("template",{slot:"label"},[t._v("제한 IP("),s("strong",{staticClass:"text-primary"},[t._v(t._s(t.serviceName))]),t._v(")")]),t._v(" "),t.isEdit?s("b-button",{staticClass:"mt-2 mb-2",attrs:{type:"button",size:"sm",variant:"outline-primary"},on:{click:t.onAddRestrict}},[s("i",{staticClass:"fa fa-plus"}),t._v(" 추가\n        ")]):t._e(),t._v(" "),s("ul",{staticClass:"icons-list",class:{"list-noIcon":t.isCreate}},t._l(t.items.ipRestrictServiceList,function(i,e){return s("li",[t.isCreate?t._e():s("i",{staticClass:"bg-primary"},[t._v(t._s(i.ipRestrictServiceSeq))]),t._v(" "),s("div",{staticClass:"desc"},[s("small",[t._v("서버 IP 주소")]),t._v(" "),s("div",{staticClass:"title"},[s("b-form-input",{attrs:{type:"text",plaintext:!t.isEdit},model:{value:i.ip,callback:function(t){i.ip=t},expression:"ip.ip"}})],1)]),t._v(" "),e>0?s("div",{staticClass:"value"},[s("div",{staticClass:"small text-muted"},[t._v(" ")]),t._v(" "),t.isEdit?s("b-button",{staticClass:"list-del",attrs:{type:"button",size:"sm",variant:"outline-danger"},on:{click:function(i){t.onDelRestrict(e)}}},[s("i",{staticClass:"fa fa-trash"})]):t._e()],1):t._e()])}))],2):t._e()],1),t._v(" "),t.isEdit&&!t.isCreate?s("b-card",[s("b-form-fieldset",{attrs:{label:"변경이력","label-cols":3,horizontal:!0}},[s("b-form-textarea",{attrs:{rows:6},model:{value:t.items.modifyHistReason,callback:function(i){t.items.modifyHistReason=i},expression:"items.modifyHistReason"}})],1)],1):t._e()],1),t._v(" "),t.isEdit?t._e():s("div",{staticClass:"collapse-title"},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.history",modifiers:{history:!0}}],attrs:{variant:"secondary",block:!0}},[t._v("\n      처리이력\n      "),s("i",{staticClass:"fa fa-angle-down"})])],1),t._v(" "),t.isEdit?t._e():s("b-collapse",{attrs:{id:"history"}},[s("b-card",[s("b-form-fieldset",{attrs:{label:"등록일","label-cols":3,horizontal:!0}},[s("b-form-input",{attrs:{value:t.items.createDateTime,plaintext:"",type:"text"}})],1),t._v(" "),s("b-form-fieldset",{attrs:{label:"등록자","label-cols":3,horizontal:!0}},[s("b-form-input",{attrs:{value:t.items.createId,plaintext:"",type:"text"}})],1),t._v(" "),t.items.modifyDateTime?s("b-form-fieldset",{attrs:{label:"수정일","label-cols":3,horizontal:!0}},[s("b-form-input",{attrs:{value:t.items.modifyDateTime,plaintext:"",type:"text"}})],1):t._e(),t._v(" "),t.items.modifyDateTime?s("b-form-fieldset",{attrs:{label:"수정자","label-cols":3,horizontal:!0}},[s("b-form-input",{attrs:{value:t.items.modifyId,plaintext:"",type:"text"}})],1):t._e(),t._v(" "),t.isEdit?t._e():s("b-form-fieldset",{attrs:{label:"배포상태","label-cols":3,horizontal:!0}},[s("b-form-input",{staticStyle:{width:"30px"},attrs:{value:t.deploy.status?"성공":"실패",plaintext:"",type:"text"}}),t._v("\n        ("),s("a",{attrs:{href:"#"}},[t._v(t._s(t.deploy.count))]),t._v(")\n      ")],1)],1)],1),t._v(" "),t.isEdit?s("div",{staticClass:"page-btn"},[s("b-button",{attrs:{type:"button",size:"sm",variant:"primary"},on:{click:t.onSubmit}},[s("i",{staticClass:"fa fa-dot-circle-o"}),t._v(" 저장")]),t._v(" "),s("b-button",{attrs:{type:"button",size:"sm",variant:"secondary"},on:{click:t.onView}},[s("i",{staticClass:"fa fa-ban"}),t._v(" 취소")])],1):s("div",{staticClass:"page-btn"},[s("b-button",{attrs:{type:"button",size:"sm",variant:"outline-primary"},on:{click:t.showHistory}},[t._v("이력관리")]),t._v(" "),s("b-button",{attrs:{type:"button",size:"sm",variant:"primary"},on:{click:t.onEdit}},[s("i",{staticClass:"fa fa-pencil"}),t._v(" 수정")])],1),t._v(" "),s("b-modal",{attrs:{size:"lg",title:"이력관리"},model:{value:t.isModalHistory,callback:function(i){t.isModalHistory=i},expression:"isModalHistory"}},[s("section",{staticClass:"board"},[s("b-table",{attrs:{striped:"",bordered:"",hover:"","show-empty":"",items:t.history.items,fields:t.history.fields},scopedSlots:t._u([{key:"histMgmtId",fn:function(i){return[s("a",{attrs:{href:t.getHistoryLink(i.value),target:"_blank"}},[t._v("보기")])]}}])})],1),t._v(" "),s("div",{slot:"modal-footer"},[s("b-button",{attrs:{type:"button",size:"sm",variant:"primary"},on:{click:function(i){t.isModalHistory=!1}}},[s("i",{staticClass:"fa fa-dot-circle-o"}),t._v(" 확인")])],1)])],1)},a=[],o={render:e,staticRenderFns:a};i.a=o}});