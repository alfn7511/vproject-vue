webpackJsonp([20],{445:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(754),a=i(755),o=i(11),n=o(s.a,a.a,null,null,null);t.default=n.exports},754:function(e,t,i){"use strict";var s=i(139),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e};t.a={name:"onetime",components:{cSwitch:s.a},data:function(){return{fields:{popName:{label:"PoP"},targetPopIdName1:{label:"1 *"},targetPopIdName2:{label:"2 *"},targetPopIdName3:{label:"3 *"},targetPopIdName4:{label:"4 *"},targetPopIdName5:{label:"5 *"},popPreferenceUseYn:{label:"사용여부"},action:{label:"관리"}},items:[],originItems:[],code:{serviceId:[],popList:[],serviceTypeCode:[]},isLoad:{serviceTypeCode:!0},history:{fields:{createId:{label:"등록/수정자",class:"text-left"},histBeginDateTime:{label:"등록/수정일시"},expireTime:{label:"ExpireTime",class:"text-right"},bypassYn:{label:"byPass"}},items:[]},service:{},isModalHistory:!1,isEdit:!1,serviceTypeCodeVal:[]}},computed:{},created:function(){this.fetchPoP()},methods:{fetchPoP:function(){var e=this;this.$https.get("/policy/pops").then(function(t){e.code.popList=t.data.items,e.fetchService()})},fetchService:function(){var e=this;this.$https.get("/policy/services").then(function(t){e.code.serviceId=t.data.items,e.service=t.data.items[0],e.fetchPreference(t.data.items[0])})},fetchPreference:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.serviceId;this.$https.get("/policy/popPreference",{q:{serviceId:i}}).then(function(t){e.items=t.data.items.map(function(t){var i={};return Object.keys(t).forEach(function(s){if(/^targetPopIdName\d/.test(s)){var a=e.code.popList.find(function(e){return e.popId===t[s]});i[s]=a?[a]:[]}}),a({},t,i,{isEdit:!1})}),e.originItems=JSON.parse(JSON.stringify(e.items))})},onEdit:function(e){this.isEdit=!0,e.item.isEdit=!0},onView:function(e){var t=this.originItems[e.index];Object.keys(t).forEach(function(i){e.item[i]=t[i]}),e.item.isEdit=!1},onSubmit:function(e){var t=this,i={};Object.keys(e.item).forEach(function(t){if(/^targetPopIdName/.test(t)){var s=t.split("targetPopIdName")[1];i["targetPopId"+s]=e.item[t][0]?e.item[t][0].popId:null}});var s=a({popId:e.item.popId,serviceId:this.service.serviceId,popPreferenceUseYn:e.item.popPreferenceUseYn,modifyHistReason:e.item.modifyHistReason||""},i);console.log(s),this.$https.put("/policy/popPreference",s).then(function(){e.item.isEdit=!1,t.items[e.index]=e.item,t.originItems[e.index]=a({},e.item)}).catch(function(i){console.log(i),t.onView(e)})},showHistory:function(e){var t=this;this.isModalHistory=!this.isModalHistory,this.$https.get("/policy/oneTimeUrl/hist/"+e.item.popId).then(function(e){t.history.items=e.data.items})}}}},755:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"animated fadeIn"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("b-card",[i("multiselect",{attrs:{value:e.service,label:"serviceName",allowEmpty:!1,showLabels:!1,searchable:!1,options:e.code.serviceId},on:{select:e.fetchPreference}})],1),e._v(" "),i("section",{staticClass:"board"},[i("b-table",{attrs:{striped:"",bordered:"","show-empty":"",items:e.items,fields:e.fields},scopedSlots:e._u([{key:"targetPopIdName1",fn:function(t){return[t.item.isEdit?i("span",[i("multiselect",{staticClass:"inline pops",class:{disSelect:void 0!==t.value[0]},attrs:{label:"popName","track-by":"popId",multiple:!0,showLabels:!1,searchable:!1,options:e.code.popList},model:{value:t.item.targetPopIdName1,callback:function(e){t.item.targetPopIdName1=e},expression:"row.item.targetPopIdName1"}})],1):i("span",[e._v(e._s(t.value[0]?t.value[0].popName:""))])]}},{key:"targetPopIdName2",fn:function(t){return[t.item.isEdit?i("span",[i("multiselect",{staticClass:"inline pops",class:{disSelect:void 0!==t.value[0]},attrs:{label:"popName","track-by":"popId",multiple:!0,showLabels:!1,searchable:!1,options:e.code.popList},model:{value:t.item.targetPopIdName2,callback:function(e){t.item.targetPopIdName2=e},expression:"row.item.targetPopIdName2"}})],1):i("span",[e._v(e._s(t.value[0]?t.value[0].popName:""))])]}},{key:"targetPopIdName3",fn:function(t){return[t.item.isEdit?i("span",[i("multiselect",{staticClass:"inline pops",class:{disSelect:void 0!==t.value[0]},attrs:{label:"popName","track-by":"popId",multiple:!0,showLabels:!1,searchable:!1,options:e.code.popList},model:{value:t.item.targetPopIdName3,callback:function(e){t.item.targetPopIdName3=e},expression:"row.item.targetPopIdName3"}})],1):i("span",[e._v(e._s(t.value[0]?t.value[0].popName:""))])]}},{key:"targetPopIdName4",fn:function(t){return[t.item.isEdit?i("span",[i("multiselect",{staticClass:"inline pops",class:{disSelect:void 0!==t.value[0]},attrs:{label:"popName","track-by":"popId",multiple:!0,showLabels:!1,searchable:!1,options:e.code.popList},model:{value:t.item.targetPopIdName4,callback:function(e){t.item.targetPopIdName4=e},expression:"row.item.targetPopIdName4"}})],1):i("span",[e._v(e._s(t.value[0]?t.value[0].popName:""))])]}},{key:"targetPopIdName5",fn:function(t){return[t.item.isEdit?i("span",[i("multiselect",{staticClass:"inline pops",class:{disSelect:void 0!==t.value[0]},attrs:{label:"popName","track-by":"popId",multiple:!0,showLabels:!1,searchable:!1,options:e.code.popList},model:{value:t.item.targetPopIdName5,callback:function(e){t.item.targetPopIdName5=e},expression:"row.item.targetPopIdName5"}})],1):i("span",[e._v(e._s(t.value[0]?t.value[0].popName:""))])]}},{key:"popPreferenceUseYn",fn:function(t){return[t.item.isEdit?i("c-switch",e._b({attrs:{type:"icon",variant:"success",pill:!0},model:{value:t.item.popPreferenceUseYn,callback:function(e){t.item.popPreferenceUseYn=e},expression:"row.item.popPreferenceUseYn"}},"c-switch",{on:"",off:""},!1)):i("b-badge",{attrs:{pill:"",variant:t.item.popPreferenceUseYn?"success":"secondary"}},[e._v("\n              "+e._s(t.item.popPreferenceUseYn?"사용":"미사용")+"\n            ")])]}},{key:"action",fn:function(t){return[t.item.isEdit?i("span",[i("b-button",{attrs:{type:"button",size:"sm",variant:"danger"},on:{click:function(i){e.onView(t)}}},[e._v("취소")]),e._v(" "),i("b-button",{attrs:{type:"button",size:"sm",variant:"primary"},on:{click:function(i){e.onSubmit(t)}}},[e._v("저장")])],1):i("span",[i("b-button",{attrs:{type:"button",size:"sm",variant:"outline-primary"},on:{click:function(i){e.showHistory(t)}}},[e._v("이력")]),e._v(" "),i("b-button",{attrs:{type:"button",size:"sm",variant:"primary"},on:{click:function(i){e.onEdit(t)}}},[e._v("수정")])],1)]}}])})],1)],1)]),e._v(" "),i("b-modal",{attrs:{size:"lg",title:"이력관리"},model:{value:e.isModalHistory,callback:function(t){e.isModalHistory=t},expression:"isModalHistory"}},[i("section",{staticClass:"board"},[i("b-table",{attrs:{striped:"",bordered:"",hover:"","show-empty":"",items:e.history.items,fields:e.history.fields},scopedSlots:e._u([{key:"bypassYn",fn:function(t){return[e._v("\n          "+e._s(t.value?"사용":"미사용")+"\n        ")]}}])})],1),e._v(" "),i("div",{slot:"modal-footer"},[i("b-button",{attrs:{type:"button",size:"sm",variant:"primary"},on:{click:function(t){e.isModalHistory=!1}}},[i("i",{staticClass:"fa fa-dot-circle-o"}),e._v(" 확인")])],1)])],1)},a=[],o={render:s,staticRenderFns:a};t.a=o}});