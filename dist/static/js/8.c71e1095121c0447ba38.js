webpackJsonp([8],{446:function(t,e,i){"use strict";function s(t){i(758)}Object.defineProperty(e,"__esModule",{value:!0});var n=i(760),o=i(764),a=i(11),r=s,c=a(n.a,o.a,r,null,null);e.default=c.exports},758:function(t,e,i){var s=i(759);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i(421)("4ca7527d",s,!0)},759:function(t,e,i){e=t.exports=i(420)(!0),e.push([t.i,".select-share li>.selected{background:grey}","",{version:3,sources:["/Users/younjinkim/WebstormProjects/vueproject/src/views/policy/PopPreference.vue"],names:[],mappings:"AACA,2BACE,eAAgB,CACjB",file:"PopPreference.vue",sourcesContent:["\n.select-share li > .selected {\n  background: grey\n}\n"],sourceRoot:""}])},760:function(t,e,i){"use strict";function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n=i(761),o=i(140),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a={name:"pop-preference",components:{SelectBox:n.a,cSwitch:o.a},data:function(){return{fields:{popName:{label:"PoP"},targetPopId1:{label:"1 *"},targetPopId2:{label:"2 *"},targetPopId3:{label:"3 *"},targetPopId4:{label:"4 *"},targetPopId5:{label:"5 *"},popPreferenceUseYn:{label:"사용여부"},action:{label:"관리"}},items:[],originItems:[],code:{serviceId:[],popList:[],serviceTypeCode:[]},isLoad:{serviceTypeCode:!0},history:{fields:{createId:{label:"등록/수정자",class:"text-left"},histBeginDateTime:{label:"등록/수정일시"},expireTime:{label:"ExpireTime",class:"text-right"},bypassYn:{label:"byPass"}},items:[]},service:{},isModalHistory:!1,isEdit:!1,serviceTypeCodeVal:[]}},computed:{},created:function(){this.fetchPoP()},methods:{fetchPoP:function(){var t=this;this.$https.get("/policy/pops").then(function(e){t.code.popList=e.data.items,t.fetchService()})},fetchService:function(){var t=this;this.$https.get("/policy/services").then(function(e){t.code.serviceId=e.data.items,t.service=e.data.items[0],t.fetchPreference(e.data.items[0])})},fetchPreference:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.serviceId;this.$https.get("/policy/popPreference",{q:{serviceId:i}}).then(function(e){t.items=e.data.items.map(function(e){var i=[];return Object.keys(e).forEach(function(s){if(/^targetPopId\d/.test(s)){var n=t.code.popList.find(function(t){return t.popId===parseInt(e[s])});n&&i.push({target:s.split("targetPopId")[1],popId:n.popId,popName:n.popName})}}),a({},e,{popList:i,isEdit:!1})}),t.originItems=JSON.parse(JSON.stringify(t.items))})},onEdit:function(t){this.isEdit=!0,t.item.isEdit=!0},onView:function(t){var e=this.originItems[t.index];Object.keys(e).forEach(function(i){t.item[i]=e[i]}),t.item.isEdit=!1},onSubmit:function(t){var e=this,i={};Object.keys(t.item).forEach(function(e){if(/^targetPopIdName/.test(e)){var s=e.split("targetPopIdName")[1];i["targetPopId"+s]=t.item[e][0]?t.item[e][0].popId:null}});var s=a({popId:t.item.popId,serviceId:this.service.serviceId,popPreferenceUseYn:t.item.popPreferenceUseYn,modifyHistReason:t.item.modifyHistReason||""},i);console.log(s),this.$https.put("/policy/popPreference",s).then(function(){t.item.isEdit=!1,e.items[t.index]=t.item,e.originItems[t.index]=a({},t.item)}).catch(function(i){console.log(i),e.onView(t)})},onOptionSelect:function(t,e,i){var s="targetPopId"+e.split("_")[2],n="targetPopIdName"+e.split("_")[2],o=this.code.popList.find(function(e){return e.popId===parseInt(t.popId)});i[s]=o.popId,i[n]=o.popName},isOptionSelected:function(t,e){var i=[];return Object.keys(e).forEach(function(t){/^targetPopId\d/.test(t)&&i.push(e[t])}),!!i.length&&i.find(function(e){return e==t.popId})},getPopValue:function(t){return this.code.popList.find(function(e){return e.popId===parseInt(t)})||null},onSelect:function(t,e){var i,n=e.split("_")[1],o=e.split("_")[2],r=(i={},s(i,"targetPopId"+o,String(t.popId)),s(i,"targetPopIdName"+o,String(t.popName)),i);this.items[n]=a({},this.items[n],r)},showHistory:function(t){var e=this;this.isModalHistory=!this.isModalHistory,this.$https.get("/policy/oneTimeUrl/hist/"+t.item.popId).then(function(t){e.history.items=t.data.items})}}}},761:function(t,e,i){"use strict";var s=i(762),n=i(763),o=i(11),a=o(s.a,n.a,null,null,null);e.a=a.exports},762:function(t,e,i){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function t(e){if(Array.isArray(e))return e.map(t);if(e&&"object"===(void 0===e?"undefined":s(e))){for(var i={},n=Object.keys(e),o=0,a=n.length;o<a;o++){var r=n[o];i[r]=t(e[r])}return i}return e};e.a={name:"multiselect-share",props:{id:{default:null},value:{type:String,default:""},options:{type:Array,required:!0},placeholder:{type:String,default:"Select"},shareModel:{default:null},trackBy:{type:String},label:{type:String},isSelected:{type:Function,default:function(t,e){var i=this,s=t[this.trackBy],n=e.map(function(t){return t[i.trackBy]});return!!n.length&&n.find(function(t){return t==s})}}},data:function(){return{isOpen:!1}},methods:{onSelect:function(t){this.$emit("select",n(t),this.id,this.shareModel),this.deactivate()},onRemove:function(t){this.value="",this.$emit("remove",n(t),this.id,this.shareModel),this.deactivate()},getOptionLabel:function(t){return t[this.label]},isOptionSelected:function(t){var e=this.shareModel?this.shareModel:this.options;return this.isSelected(t,e)},activate:function(){this.isOpen=!0,this.$el.focus()},deactivate:function(){this.isOpen=!1,this.$el.blur()},toggle:function(){this.isOpen?this.deactivate():this.activate()},contentStyle:function(){return this.options.length?{display:"inline-block"}:{display:"block"}}}}},763:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"multiselect pops",class:{"multiselect--active":t.isOpen},attrs:{tabindex:"0"},on:{focus:function(e){t.activate()},blur:function(e){t.deactivate()},keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27))return null;t.deactivate()}}},[t._t("caret",[i("div",{staticClass:"multiselect__select",on:{mousedown:function(e){e.preventDefault(),e.stopPropagation(),t.toggle()}}})],{toggle:t.toggle}),t._v(" "),i("div",{ref:"tags",staticClass:"multiselect__tags"},[i("div",{directives:[{name:"show",rawName:"v-show",value:""!==t.value,expression:"value !== ''"}],staticClass:"multiselect__tags-wrap"},[i("span",{staticClass:"multiselect__tag"},[i("span",[t._v(t._s(t.value))]),t._v(" "),i("i",{staticClass:"multiselect__tag-icon",attrs:{"aria-hidden":"true",tabindex:"1"},on:{mousedown:function(e){e.preventDefault(),t.onRemove(t.opt)}}})])]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:""===t.value,expression:"value === ''"}],staticClass:"multiselect__single",on:{mousedown:function(e){e.preventDefault(),t.toggle(e)}}},[t._v("\n        "+t._s(t.placeholder)+"\n      ")])]),t._v(" "),i("transition",{attrs:{name:"multiselect"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],ref:"list",staticClass:"multiselect__content-wrapper",on:{focus:t.activate,mousedown:function(t){t.preventDefault()}}},[i("ul",{staticClass:"multiselect__content",style:t.contentStyle},t._l(t.options,function(e,s){return i("li",{key:s,staticClass:"multiselect__element"},[i("span",{staticClass:"multiselect__option",class:{"multiselect__option--selected":t.isOptionSelected(e)},on:{click:function(i){i.stopPropagation(),t.onSelect(e)}}},[t._t("option",[i("span",[t._v(t._s(t.getOptionLabel(e)))])],{option:e})],2)])}))])])],2)},n=[],o={render:s,staticRenderFns:n};e.a=o},764:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"animated fadeIn"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("b-card",[i("multiselect",{staticClass:"noEmpty",attrs:{value:t.service,label:"serviceName",allowEmpty:!1,showLabels:!1,searchable:!1,options:t.code.serviceId},on:{select:t.fetchPreference}})],1),t._v(" "),i("section",{staticClass:"board"},[i("b-table",{attrs:{striped:"",bordered:"","show-empty":"",items:t.items,fields:t.fields},scopedSlots:t._u([{key:"targetPopId1",fn:function(e){return[i("span",[i("select-box",{attrs:{label:"popName",trackBy:"popId",id:"row_"+e.index+"_1",value:e.value,options:t.code.popList,shareModel:e.item,isSelected:t.isOptionSelected},on:{select:t.onOptionSelect}})],1),t._v(" "),i("span",[t._v(t._s(e.item.targetPopIdName1))])]}},{key:"targetPopId2",fn:function(t){}},{key:"targetPopId3",fn:function(e){return[e.item.isEdit?i("span"):i("span",[t._v(t._s(e.item.targetPopIdName3))])]}},{key:"targetPopId4",fn:function(e){return[e.item.isEdit?i("span",[i("multiselect",{staticClass:"multiple pops",attrs:{label:"popName","track-by":"popId",multiple:!0,showLabels:!1,searchable:!1,options:t.code.popList},model:{value:e.item.popList,callback:function(t){e.item.popList=t},expression:"row.item.popList"}})],1):i("span",[t._v(t._s(e.item.targetPopIdName4))])]}},{key:"targetPopId5",fn:function(e){return[e.item.isEdit?i("span"):i("span",[t._v(t._s(e.item.targetPopIdName5))])]}},{key:"popPreferenceUseYn",fn:function(e){return[e.item.isEdit?i("c-switch",t._b({attrs:{type:"icon",variant:"success",pill:!0},model:{value:e.item.popPreferenceUseYn,callback:function(t){e.item.popPreferenceUseYn=t},expression:"row.item.popPreferenceUseYn"}},"c-switch",{on:"",off:""},!1)):i("b-badge",{attrs:{pill:"",variant:e.item.popPreferenceUseYn?"success":"secondary"}},[t._v("\n              "+t._s(e.item.popPreferenceUseYn?"사용":"미사용")+"\n            ")])]}},{key:"action",fn:function(e){return[e.item.isEdit?i("span",[i("b-button",{attrs:{type:"button",variant:"danger"},on:{click:function(i){t.onView(e)}}},[t._v("취소")]),t._v(" "),i("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(i){t.onSubmit(e)}}},[t._v("저장")])],1):i("span",[i("b-button",{attrs:{type:"button",variant:"outline-primary"},on:{click:function(i){t.showHistory(e)}}},[t._v("이력")]),t._v(" "),i("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(i){t.onEdit(e)}}},[t._v("수정")])],1)]}}])})],1)],1)]),t._v(" "),i("b-modal",{attrs:{size:"lg",title:"이력관리"},model:{value:t.isModalHistory,callback:function(e){t.isModalHistory=e},expression:"isModalHistory"}},[i("section",{staticClass:"board"},[i("b-table",{attrs:{striped:"",bordered:"",hover:"","show-empty":"",items:t.history.items,fields:t.history.fields},scopedSlots:t._u([{key:"bypassYn",fn:function(e){return[t._v("\n          "+t._s(e.value?"사용":"미사용")+"\n        ")]}}])})],1),t._v(" "),i("div",{slot:"modal-footer"},[i("b-button",{attrs:{type:"button",size:"sm",variant:"primary"},on:{click:function(e){t.isModalHistory=!1}}},[i("i",{staticClass:"fa fa-dot-circle-o"}),t._v(" 확인")])],1)])],1)},n=[],o={render:s,staticRenderFns:n};e.a=o}});