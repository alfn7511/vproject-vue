webpackJsonp([6],{443:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e(732),s=e(733),a=e(11),n=a(o.a,s.a,null,null,null);i.default=n.exports},732:function(t,i,e){"use strict";var o=e(141),s=e(140),a=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};i.a={name:"service",props:["id"],components:{ContentHeader:o.a,cSwitch:s.a},data:function(){return{name:"Service 상세",originItems:{},serviceName:"",items:{originList:[],createDateTime:"",createId:"",modifyDateTime:"",modifyId:"",modifyHistReason:"등록",histMgmtId:null},code:{serviceTypeList:[],originSectionCode:[],originBucketId:[]},history:{fields:{createId:{label:"등록/수정자",class:"text-left"},histBeginDateTime:{label:"등록/수정일시"},modifyHistReason:{label:"변경이력",class:"text-left"},histMgmtId:{label:"보기"}},items:[]},isLoad:{originSectionCode:!0,originBucketId:!0},isCreate:!1,isEdit:!1,isModalHistory:!1,deploy:{status:!0,count:11234}}},created:function(){var t=this,i=this.$route.query.histories,e=void 0!==i?"/services/"+this.id+"/origins/histories/"+i:"/services/"+this.id+"/origins";i&&document.querySelector("body.app").classList.add("history-mode"),this.$https.get("/services/"+this.id).then(function(i){t.serviceName=i.data.items.serviceName}),this.$https.get(e+"/types").then(function(i){t.code.serviceTypeList=i.data.items}),this.$https.get("/system/commonCode",{q:{groupCode:"ORIGIN_SECTION"}}).then(function(i){t.isLoad.originSectionCode=!1,t.code.originSectionCode=i.data.items}),this.$https.get(e+"/buckets").then(function(i){t.isLoad.originBucketId=!1,t.code.originBucketId=i.data.items}),this.$https.get(e).then(function(i){t.onLoadDetail(i.data)}).catch(function(i){t.onLoadCreate()})},methods:{onEdit:function(){this.isEdit=!0},onView:function(){this.isEdit=!1,this.items=JSON.parse(JSON.stringify(this.originItems))},onLoadCreate:function(){this.isCreate=!0,this.isEdit=!0,this.items.originList=this.code.serviceTypeList.map(function(t){return{serviceTypeCode:t.serviceTypeCode,serviceTypeName:t.serviceTypeName,originSectionCodeName:"",originBucketId:null,originBucketName:"",operatorName:"",operatorTeamName:"",originSectionCode:null,originDomainName:null,originPort:null}})},onLoadDetail:function(t){var i=this;this.items=a({},t.items),this.items.originList=t.items.originList.map(function(t){var e=i.code.originSectionCode.find(function(i){return i.code===t.originSectionCode}),o=e?e.codeName:"";return a({},t,{originBucketId:t.originBucketId?i.code.originBucketId.find(function(i){return i.originBucketId===t.originBucketId}):null,originSectionCodeName:o})}),this.originItems=JSON.parse(JSON.stringify(this.items))},onSubmit:function(){var t=this;this.items.originList=this.items.originList.map(function(i){var e=i.serviceTypeCode,o=i.originSectionCode,s=i.originBucketId,a=i.originDomainName,n=i.originPort;return{serviceTypeCode:e,originSectionCode:o,originBucketId:s?s.originBucketId:null,originDomainName:a,originPort:n,modifyHistReason:t.items.modifyHistReason}}),this.isCreate?this.$https.post("/services/"+this.id+"/origins",this.items.originList).then(function(){t.$router.go(t.$router.currentRoute)}).catch(function(t){console.log(t)}):this.$https.put("/services/"+this.id+"/origins",this.items.originList).then(function(i){t.$router.go(t.$router.currentRoute)}).catch(function(t){console.log(t)})},onBucket:function(t,i){var e=t.operatorName,o=t.operatorTeamName;this.items.originList[i].operatorName=e,this.items.originList[i].operatorTeamName=o},getHistoryLink:function(t){return"#/service/service/"+this.id+"/origin?histories="+t},showHistory:function(){var t=this;this.isModalHistory=!this.isModalHistory,this.$https.get("/services/"+this.id+"/origins/histories").then(function(i){t.history.items=i.data.items})},getSelectLabel:function(t){var i=t.code?t.code.split("_")[0]:"";return"SERVICE"===i&&t.codeValChar1!==t.codeName?t.codeValChar1+" > "+t.codeName:t.codeName}}}},733:function(t,i,e){"use strict";var o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"animated fadeIn"},[e("content-header",{attrs:{title:t.serviceName,name:t.name}}),t._v(" "),e("div",{staticClass:"collapse-title"},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formDefault",modifiers:{formDefault:!0}}],attrs:{variant:"secondary",block:!0}},[t._v("\n      Origin\n      "),e("i",{staticClass:"fa fa-angle-down"})])],1),t._v(" "),e("b-collapse",{attrs:{id:"formDefault",visible:""}},[t._l(t.items.originList,function(i,o){return e("b-card",{key:i.serviceTypeCode},[e("div",{slot:"header"},[e("i",{staticClass:"fa fa-angle-right"}),t._v(" "+t._s(i.serviceTypeName)+"\n      ")]),t._v(" "),e("b-form-fieldset",{attrs:{label:"Origin 사용 설정 *","label-cols":3,horizontal:!0}},[t.isEdit?e("b-form-radio-group",{attrs:{options:t.code.originSectionCode,name:i.serviceTypeCode,"value-field":"code","text-field":"codeName"},model:{value:i.originSectionCode,callback:function(t){i.originSectionCode=t},expression:"origin.originSectionCode"}}):e("b-form-input",{attrs:{value:i.originSectionCodeName,type:"text",plaintext:""}})],1),t._v(" "),"ORIGIN_SECTION_01"===i.originSectionCode?e("b-form-fieldset",{attrs:{label:"Bucket 선택 *","label-cols":3,horizontal:!0}},[t.isEdit?e("multiselect",{staticClass:"inline",staticStyle:{"min-width":"120px"},attrs:{label:"originBucketName",id:o,allowEmpty:!0,showLabels:!1,searchable:!1,options:t.code.originBucketId,loading:t.isLoad.originBucketId,placeholder:"Select Bucket"},on:{select:t.onBucket},model:{value:i.originBucketId,callback:function(t){i.originBucketId=t},expression:"origin.originBucketId"}}):e("b-form-input",{attrs:{value:i.originBucketName,type:"text",plaintext:""}}),t._v("\n        "+t._s(i.operatorName)+" /\n        "+t._s(i.operatorTeamName)+"\n      ")],1):t._e(),t._v(" "),"ORIGIN_SECTION_02"===i.originSectionCode?e("b-form-fieldset",{attrs:{label:"Origin Domain *","label-cols":3,horizontal:!0}},[e("b-form-input",{attrs:{type:"text",plaintext:!t.isEdit},model:{value:i.originDomainName,callback:function(t){i.originDomainName=t},expression:"origin.originDomainName"}})],1):t._e(),t._v(" "),"ORIGIN_SECTION_02"===i.originSectionCode?e("b-form-fieldset",{attrs:{label:"Port *","label-cols":3,horizontal:!0}},[e("b-form-input",{staticStyle:{width:"120px"},attrs:{type:"text",plaintext:!t.isEdit},model:{value:i.originPort,callback:function(t){i.originPort=t},expression:"origin.originPort"}})],1):t._e()],1)}),t._v(" "),t.isEdit&&!t.isCreate?e("b-card",[e("b-form-fieldset",{attrs:{label:"변경이력","label-cols":3,horizontal:!0}},[e("b-form-textarea",{attrs:{rows:6},model:{value:t.items.modifyHistReason,callback:function(i){t.items.modifyHistReason=i},expression:"items.modifyHistReason"}})],1)],1):t._e()],2),t._v(" "),t.isEdit?t._e():e("div",{staticClass:"collapse-title"},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.history",modifiers:{history:!0}}],attrs:{variant:"secondary",block:!0}},[t._v("\n      처리이력\n      "),e("i",{staticClass:"fa fa-angle-down"})])],1),t._v(" "),t.isEdit?t._e():e("b-collapse",{attrs:{id:"history"}},[e("b-card",[e("b-form-fieldset",{attrs:{label:"등록일","label-cols":3,horizontal:!0}},[e("b-form-input",{attrs:{value:t.items.createDateTime,plaintext:"",type:"text"}})],1),t._v(" "),e("b-form-fieldset",{attrs:{label:"등록자","label-cols":3,horizontal:!0}},[e("b-form-input",{attrs:{value:t.items.createId,plaintext:"",type:"text"}})],1),t._v(" "),t.items.modifyDateTime?e("b-form-fieldset",{attrs:{label:"수정일","label-cols":3,horizontal:!0}},[e("b-form-input",{attrs:{value:t.items.modifyDateTime,plaintext:"",type:"text"}})],1):t._e(),t._v(" "),t.items.modifyDateTime?e("b-form-fieldset",{attrs:{label:"수정자","label-cols":3,horizontal:!0}},[e("b-form-input",{attrs:{value:t.items.modifyId,plaintext:"",type:"text"}})],1):t._e(),t._v(" "),t.isEdit?t._e():e("b-form-fieldset",{attrs:{label:"배포상태","label-cols":3,horizontal:!0}},[e("b-form-input",{staticStyle:{width:"30px"},attrs:{value:t.deploy.status?"성공":"실패",plaintext:"",type:"text"}}),t._v("\n        ("),e("a",{attrs:{href:"#"}},[t._v(t._s(t.deploy.count))]),t._v(")\n      ")],1)],1)],1),t._v(" "),t.isEdit?e("div",{staticClass:"page-btn"},[e("b-button",{attrs:{type:"button",size:"sm",variant:"primary"},on:{click:t.onSubmit}},[e("i",{staticClass:"fa fa-dot-circle-o"}),t._v(" 저장")]),t._v(" "),e("b-button",{attrs:{type:"button",size:"sm",variant:"secondary"},on:{click:t.onView}},[e("i",{staticClass:"fa fa-ban"}),t._v(" 취소")])],1):e("div",{staticClass:"page-btn"},[e("b-button",{attrs:{type:"button",size:"sm",variant:"outline-primary"},on:{click:t.showHistory}},[t._v("이력관리")]),t._v(" "),e("b-button",{attrs:{type:"button",size:"sm",variant:"primary"},on:{click:t.onEdit}},[e("i",{staticClass:"fa fa-pencil"}),t._v(" 수정")])],1),t._v(" "),e("b-modal",{attrs:{size:"lg",title:"이력관리"},model:{value:t.isModalHistory,callback:function(i){t.isModalHistory=i},expression:"isModalHistory"}},[e("section",{staticClass:"board"},[e("b-table",{attrs:{striped:"",bordered:"",hover:"","show-empty":"",items:t.history.items,fields:t.history.fields},scopedSlots:t._u([{key:"histMgmtId",fn:function(i){return[e("a",{attrs:{href:t.getHistoryLink(i.value),target:"_blank"}},[t._v("보기")])]}}])})],1),t._v(" "),e("div",{slot:"modal-footer"},[e("b-button",{attrs:{type:"button",size:"sm",variant:"primary"},on:{click:function(i){t.isModalHistory=!1}}},[e("i",{staticClass:"fa fa-dot-circle-o"}),t._v(" 확인")])],1)])],1)},s=[],a={render:o,staticRenderFns:s};i.a=a}});