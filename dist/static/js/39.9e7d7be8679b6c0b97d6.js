webpackJsonp([39],{599:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(779),s=i(780),o=i(15),n=o(a.a,s.a,null,null,null);t.default=n.exports},779:function(e,t,i){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var s=i(178),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e};t.a={name:"referrers",components:{cSwitch:s.a},data:function(){return{items:{edgeId:null,popId:null,edgeDomainName:null,edgeRelayYn:!1,edgeUseYn:!0,serviceTypeCode:[]},code:{popId:[],serviceTypeCode:[]},isLoad:{popId:!0,serviceTypeCode:!0},inValidForm:!1}},computed:{popId:{get:function(){var e=this;return this.code.popId.find(function(t){return t.popId===e.items.popId})||null},set:function(e){this.items.popId=null!==e?e.popId:null}},serviceTypeCode:{get:function(){var e=this;return this.items.serviceTypeCode.length>0?this.items.serviceTypeCode.map(function(t){return e.code.serviceTypeCode.find(function(e){return e.code===t})}):[]},set:function(e){this.items.serviceTypeCode=e.length>0?e.map(function(e){return e.code}):[]}},serviceDomainList:function(){var e=this.serviceTypeCode.map(function(e){return e.codeValChar1});return[].concat(a(new Set(e)))},valid:function(){return{popId:null!==this.items.popId,serviceTypeCode:this.items.serviceTypeCode.length}},feedback:function(){return{domain:null===this.items.edgeDomainName?"Domain name 생성이 필요합니다.":""}}},created:function(){var e=this;void 0===this.$route.query.q&&(alert("잘못된 접근입니다"),this.$router.push({name:"Edge 관리"}));var t=JSON.parse(this.$route.query.q).id;this.$https.get("/edges/"+t).then(function(t){var i=null!==t.data.items.serviceTypeCode?t.data.items.serviceTypeCode:[];e.items=o({},t.data.items,{serviceTypeCode:i})}),this.$https.get("/system/commonCode",{q:{groupCode:"SERVICE_TYPE"}}).then(function(t){e.isLoad.serviceTypeCode=!1,e.code.serviceTypeCode=t.data.items.filter(function(e){return 4===e.code.split("_")[2].length})}),this.$https.get("/pops").then(function(t){e.isLoad.popId=!1,e.code.popId=t.data.items})},methods:{onSubmit:function(){var e=this;this.items.edgeRelayYn="Relay"===this.items.edgeRelayName;var t=this.items,i=t.edgeId,a=t.popId,s=t.edgeDomainName,o=t.edgeRelayYn,n=t.edgeUseYn,r=t.serviceTypeCode,l=this.$valid.all({popId:a,edgeDomainName:s,serviceTypeCode:r});this.inValidForm=!l,this.$https.post("/edges",{edgeId:i,popId:a,edgeDomainName:s,edgeRelayYn:o,edgeUseYn:n,serviceTypeCode:r}).then(function(){e.$router.push({name:"Edge 상세",params:{id:e.items.edgeId}})}).catch(function(e){console.log(e)})},onChangeEdgeRelay:function(e){this.items.serviceTypeCode=[],"Relay"===e&&(this.serviceTypeCode=this.code.serviceTypeCode.map(function(e){return o({},e)}))},onSelectAfter:function(e){var t=e.find(function(e){return"SERVICE_TYPE_0103"===e.code});t&&(this.items.serviceTypeCode=[],this.serviceTypeCode=[t])},fetchDomain:function(){var e=this;this.$https.get("/edges/domain").then(function(t){e.items.edgeDomainName=t.data.items.domain})}}}},780:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"animated fadeIn"},[i("b-form",{staticClass:"formView",attrs:{validated:e.inValidForm,novalidate:""}},[i("b-form-fieldset",{attrs:{label:"IP",horizontal:!0}},[i("b-form-input",{attrs:{type:"text",plaintext:""},model:{value:e.items.ip,callback:function(t){e.items.ip=t},expression:"items.ip"}})],1),e._v(" "),i("b-form-fieldset",{attrs:{label:"Host Name",horizontal:!0}},[i("b-form-input",{attrs:{value:e.items.hostName,type:"text",plaintext:""}})],1),e._v(" "),i("b-form-fieldset",{attrs:{label:"PoP 선택<i class='require'>*</i>","invalid-feedback":e.$valid.msg.select,horizontal:!0}},[i("multiselect",{class:{invalid:!e.valid.popId},attrs:{showLabels:!1,searchable:!1,options:e.code.popId,loading:e.isLoad.popId,"track-by":"popId",label:"popName",placeholder:"Select PoP"},model:{value:e.popId,callback:function(t){e.popId=t},expression:"popId"}})],1),e._v(" "),i("b-form-fieldset",{attrs:{label:"구분<i class='require'>*</i>",horizontal:!0}},[i("b-form-radio-group",{attrs:{options:[{text:"Edge",value:"Edge"},{text:"Relay",value:"Relay"}]},on:{change:e.onChangeEdgeRelay},model:{value:e.items.edgeRelayName,callback:function(t){e.items.edgeRelayName=t},expression:"items.edgeRelayName"}})],1),e._v(" "),i("b-form-fieldset",{attrs:{"invalid-feedback":e.$valid.msg.select,horizontal:!0}},[i("template",{slot:"label"},[e._v("\n        Service Type"),i("i",{staticClass:"require"},[e._v("*")])]),e._v(" "),i("multiselect",{staticClass:"multiple",class:{invalid:!e.valid.serviceTypeCode},attrs:{"track-by":"code",label:"codeName",multiple:!0,showLabels:!1,options:e.code.serviceTypeCode,loading:e.isLoad.serviceTypeCode,disabled:"Relay"===e.items.edgeRelayName,placeholder:"Select service type"},on:{close:e.onSelectAfter},model:{value:e.serviceTypeCode,callback:function(t){e.serviceTypeCode=t},expression:"serviceTypeCode"}})],2),e._v(" "),i("b-form-fieldset",{attrs:{label:"Domain","invalid-feedback":e.feedback.domain,horizontal:!0}},[i("b-button",{attrs:{variant:"in-table"},on:{click:e.fetchDomain}},[e._v("생성")]),e._v(" "),i("small",{staticClass:"form-text-alone text-primary ml-2",class:{invalid:null===e.items.edgeDomainName}},[i("strong",[e._v(e._s(e.items.edgeDomainName))])]),e._v(" "),e.serviceDomainList.length?i("div",{staticClass:"form-in-view mt-2"},e._l(e.serviceDomainList,function(t,a){return i("b-form-fieldset",{key:a,attrs:{label:t,horizontal:!0}},[i("span",{staticClass:"font-text-alone"},[e._v("\n              http(s)://"),i("strong",{staticClass:"text-primary"},[e._v(e._s(e.items.edgeDomainName))]),e._v(".[city].[country].[service type].[service name].vessels.com\n            ")])])})):e._e()],1),e._v(" "),i("b-form-fieldset",{attrs:{label:"사용여부",description:"※ 미사용 선택 시, DNS(GTM) 설정 정보가 삭제됩니다.",horizontal:!0}},[i("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"사용",off:"미사용"},model:{value:e.items.edgeUseYn,callback:function(t){e.items.edgeUseYn=t},expression:"items.edgeUseYn"}})],1)],1),e._v(" "),i("div",{staticClass:"page-btn"},[i("b-button",{attrs:{type:"button",variant:"outline-secondary",to:{name:"Edge 관리"}}},[e._v("취소")]),e._v(" "),i("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onSubmit}},[e._v("저장")])],1)],1)},s=[],o={render:a,staticRenderFns:s};t.a=o}});