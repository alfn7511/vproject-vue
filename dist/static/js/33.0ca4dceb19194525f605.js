webpackJsonp([33],{606:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(793),s=o(794),a=o(15),n=a(i.a,s.a,null,null,null);e.default=n.exports},793:function(t,e,o){"use strict";var i=o(179),s=o(178);e.a={name:"pops",props:["id","histories"],components:{ContentHeader:i.a,cSwitch:s.a},data:function(){return{name:"Pop 상세",originItems:{},items:{popName:"",popHostName:"",popDomainName:null,popCtprvnCode:null,popSigCode:null,popAddress:"",qualitySolutionTeamCode:null,qualitySolutionTeamCodeName:"",bandwidth:0,popUseYn:!0,serviceNames:null,lowReferrerList:[],edgeList:[],processStateCodeName:null,processStateCode:null,processId:null},code:{popCtprvnCode:[],popSigCode:[],qualitySolutionTeamCode:[]},history:{fields:{createId:{label:"등록/수정자",class:"text-left"},histBeginDateTime:{label:"등록/수정일시"},modifyHistReason:{label:"변경이력",class:"text-left"},histMgmtId:{label:"보기"}},items:[],pageInfo:{page:1,size:10,totalCount:1}},isLoad:{popCtprvnCode:!0,popSigCode:!0,qualitySolutionTeamCode:!0},isEdit:!1,isModalHistory:!1,modal:{open:!1,type:"done",msg:"",action:function(){}},inValidForm:!1}},computed:{popCtprvnCode:{get:function(){var t=this;return this.code.popCtprvnCode.find(function(e){return e.addressCode===t.items.popCtprvnCode})||null},set:function(t){this.items.popCtprvnCode=null!==t?t.addressCode:null}},popSigCode:{get:function(){var t=this;return this.code.popSigCode.find(function(e){return e.addressCode===t.items.popSigCode})||null},set:function(t){this.items.popSigCode=null!==t?t.addressCode:null}},qualitySolutionTeamCode:{get:function(){var t=this;return this.code.qualitySolutionTeamCode.find(function(e){return e.code===t.items.qualitySolutionTeamCode})||null},set:function(t){this.items.qualitySolutionTeamCode=null!==t?t.code:null}},serviceNames:function(){return null!==this.items.serviceNames?this.items.serviceNames.split(","):[]},isProcessComplete:function(){return null!==this.items.processStateCode&&""!==this.items.processStateCode&&"PROCESS_STATE_02"===this.items.processStateCode},valid:function(){return{popCtprvnCode:null!==this.items.popCtprvnCode,popSigCode:null!==this.items.popSigCode,qualitySolutionTeamCode:null!==this.items.qualitySolutionTeamCode}}},created:function(){var t=this,e=this.$route.query.histories,o=void 0!==e?"/pops/"+this.id+"/histories/"+e:"/pops/"+this.id;e&&document.querySelector("body.app").classList.add("history-mode"),this.fetchAddress(),this.$https.get("/system/commonCode",{q:{groupCode:"QUALITY_TEAM"}}).then(function(e){t.isLoad.qualitySolutionTeamCode=!1,t.code.qualitySolutionTeamCode=e.data.items}),this.$https.get(o).then(function(e){t.items=e.data.items,t.originItems=JSON.parse(JSON.stringify(t.items)),""!==t.items.popCtprvnCode&&t.fetchAddress(t.items.popCtprvnCode)})},methods:{onEdit:function(){this.isEdit=!0},onView:function(){this.isEdit=!1,this.items=JSON.parse(JSON.stringify(this.originItems))},onSubmit:function(){var t=this,e=this.$valid.all(this.items);this.inValidForm=!e,e&&this.$https.put("/pops/"+this.id,this.items).then(function(e){t.$router.go(t.$router.currentRoute)}).catch(function(t){console.log(t)})},onDeploy:function(){var t=this;this.$https.put("/pops/"+this.id+"/serviceProcess").then(function(e){t.$router.go(t.$router.currentRoute)}).catch(function(t){console.log(t)})},onDelete:function(){this.modal={open:!0,type:"error",msg:"정말로 삭제하시겠습니까?",action:this.onDeleteData}},onDeleteData:function(){var t=this;this.$https.delete("/pops/"+this.id).then(function(e){t.$router.push({name:"Pop 관리"})}).catch(function(t){console.log(t)})},onFirstAddress:function(t){this.fetchAddress(t.addressCode)},fetchAddress:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$https.get("/pops/address",{firstDepth:e}).then(function(o){""===e?(t.isLoad.popCtprvnCode=!1,t.code.popCtprvnCode=o.data.items):(t.isLoad.popSigCode=!1,t.code.popSigCode=o.data.items)})},getHistoryLink:function(t){return"#/configuration/pop/"+this.id+"?histories="+t},showHistory:function(){var t=this;this.isModalHistory=!this.isModalHistory,this.$https.get("/pops/"+this.id+"/histories").then(function(e){t.history.items=e.data.items})}}}},794:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"animated fadeIn"},[o("content-header",{attrs:{title:t.items.popName,name:t.name}}),t._v(" "),o("div",{staticClass:"collapse-title"},[o("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formDefault",modifiers:{formDefault:!0}}],staticClass:"btn-collapse"},[o("i",{staticClass:"fa"}),t._v("\n      기본정보\n    ")])],1),t._v(" "),o("b-collapse",{attrs:{id:"formDefault",visible:""}},[o("b-form",{staticClass:"formView",attrs:{validated:t.inValidForm,novalidate:""}},[t.isEdit?t._e():o("b-form-fieldset",{attrs:{label:"PoP ID",horizontal:!0}},[o("b-form-input",{attrs:{value:t.id,type:"text",plaintext:""}})],1),t._v(" "),o("b-form-fieldset",{attrs:{label:"PoP Name",horizontal:!0}},[o("b-form-input",{attrs:{value:t.items.popName,type:"text",plaintext:""}})],1),t._v(" "),o("b-form-fieldset",{attrs:{label:"Host Name(Prefix)",horizontal:!0}},[o("b-form-input",{attrs:{value:t.items.popHostName,type:"text",plaintext:""}})],1),t._v(" "),o("b-form-fieldset",{attrs:{label:"Domain",horizontal:!0}},[o("small",{staticClass:"form-text-alone"},[t._v("\n          http(s)://[edge].[content type]."),o("strong",{staticClass:"text-primary"},[t._v(t._s(t.items.popDomainName))]),t._v(".[country].[service type].[service name].vessels.com\n        ")])]),t._v(" "),t.isEdit?o("b-form-fieldset",{attrs:{"invalid-feedback":t.$valid.msg.select,horizontal:!0}},[o("template",{slot:"label"},[t._v("\n          주소"),o("i",{staticClass:"require"},[t._v("*")])]),t._v(" "),o("multiselect",{staticClass:"inline",class:{invalid:!t.valid.popCtprvnCode},staticStyle:{width:"156px"},attrs:{showLabels:!1,searchable:!1,options:t.code.popCtprvnCode,loading:t.isLoad.popCtprvnCode,"track-by":"addressCode",label:"addressCodeName",placeholder:"선택"},on:{select:t.onFirstAddress},model:{value:t.popCtprvnCode,callback:function(e){t.popCtprvnCode=e},expression:"popCtprvnCode"}}),t._v(" "),t.popCtprvnCode?o("multiselect",{staticClass:"inline",class:{invalid:!t.valid.popSigCode},staticStyle:{width:"160px"},attrs:{showLabels:!1,searchable:!1,options:t.code.popSigCode,loading:t.isLoad.popSigCode,"track-by":"addressCode",label:"addressCodeName",placeholder:"선택"},model:{value:t.popSigCode,callback:function(e){t.popSigCode=e},expression:"popSigCode"}}):t._e()],2):o("b-form-fieldset",{attrs:{label:"주소",horizontal:!0}},[o("b-form-input",{attrs:{value:t.items.popAddress,type:"text",plaintext:""}})],1),t._v(" "),o("b-form-fieldset",{attrs:{"invalid-feedback":t.$valid.msg.select,horizontal:!0}},[o("template",{slot:"label"},[t._v("\n          품질솔루션팀"),t.isEdit?o("i",{staticClass:"require"},[t._v("*")]):t._e()]),t._v(" "),t.isEdit?o("multiselect",{class:{invalid:!t.valid.qualitySolutionTeamCode},attrs:{showLabels:!1,options:t.code.qualitySolutionTeamCode,loading:t.isLoad.qualitySolutionTeamCode,"track-by":"code",label:"codeName",placeholder:"선택"},model:{value:t.qualitySolutionTeamCode,callback:function(e){t.qualitySolutionTeamCode=e},expression:"qualitySolutionTeamCode"}}):o("b-form-input",{attrs:{value:t.items.qualitySolutionTeamCodeName,type:"text",plaintext:""}})],2),t._v(" "),t.isEdit?t._e():o("b-form-fieldset",{attrs:{label:"Service",horizontal:!0}},[o("div",{staticClass:"badge-list"},t._l(t.serviceNames,function(e){return o("span",{staticClass:"badge sm"},[t._v("\n            "+t._s(e)+"\n          ")])}))]),t._v(" "),o("b-form-fieldset",{attrs:{"invalid-feedback":t.$valid.msg.require,horizontal:!0}},[o("template",{slot:"label"},[t._v("\n          Bandwidth"),t.isEdit?o("i",{staticClass:"require"},[t._v("*")]):t._e()]),t._v(" "),t.isEdit?o("cleave",{staticClass:"form-control",staticStyle:{width:"156px"},attrs:{value:t.items.bandwidth,options:{numeral:!0,numeralPositiveOnly:!0,numeralDecimalScale:0},required:""},on:{"update:value":function(e){t.items.bandwidth=e}}}):o("b-form-input",{attrs:{value:t.items.bandwidth,type:"text",plaintext:""}})],2),t._v(" "),o("b-form-fieldset",{attrs:{label:"사용여부",horizontal:!0}},[t.isEdit?o("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"사용",off:"미사용"},model:{value:t.items.popUseYn,callback:function(e){t.items.popUseYn=e},expression:"items.popUseYn"}}):o("span",{staticClass:"badge",class:{primary:t.items.popUseYn}},[t._v(t._s(t.items.popUseYn?"사용":"미사용")+"\n        ")])],1),t._v(" "),t.isEdit?o("b-form-fieldset",{attrs:{label:"변경이력<i class='require'>*</i>","invalid-feedback":t.$valid.msg.require,horizontal:!0}},[o("b-form-textarea",{attrs:{rows:6,required:""},model:{value:t.items.modifyHistReason,callback:function(e){t.items.modifyHistReason=e},expression:"items.modifyHistReason"}})],1):t._e()],1)],1),t._v(" "),t.isEdit?t._e():o("div",{staticClass:"collapse-title"},[o("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formHistory",modifiers:{formHistory:!0}}],staticClass:"btn-collapse"},[o("i",{staticClass:"fa"}),t._v("\n      처리이력\n    ")])],1),t._v(" "),t.isEdit?t._e():o("b-collapse",{attrs:{id:"formHistory",visible:""}},[o("b-form",{staticClass:"formView"},[o("div",{staticClass:"form-row"},[o("b-form-fieldset",{attrs:{label:"등록일시",horizontal:!0}},[o("b-form-input",{attrs:{value:t.items.createDateTime,plaintext:"",type:"text"}})],1),t._v(" "),o("b-form-fieldset",{attrs:{label:"등록자",horizontal:!0}},[o("b-form-input",{attrs:{value:t.items.createId,plaintext:"",type:"text"}})],1)],1),t._v(" "),o("div",{staticClass:"form-row"},[o("b-form-fieldset",{attrs:{label:"수정일",horizontal:!0}},[o("b-form-input",{attrs:{value:t.items.modifyDateTime,plaintext:"",type:"text"}})],1),t._v(" "),o("b-form-fieldset",{attrs:{label:"수정자",horizontal:!0}},[o("b-form-input",{attrs:{value:t.items.modifyId,plaintext:"",type:"text"}})],1)],1),t._v(" "),o("b-form-fieldset",{attrs:{label:"배포상태",horizontal:!0}},[o("input",{staticClass:"form-control-plaintext",staticStyle:{width:"50px"},attrs:{type:"text",readonly:"readonly"},domProps:{value:t.items.processStateCodeName}}),t._v(" "),o("a",{staticClass:"btn btn-in-table",attrs:{href:"#/workflow/service/"+t.items.processId,target:"_blank"}},[t._v(t._s(t.items.processId))])])],1)],1),t._v(" "),t.isEdit?o("div",{staticClass:"page-btn"},[o("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:t.onView}},[t._v("취소")]),t._v(" "),o("b-button",{attrs:{type:"button",variant:"primary"},on:{click:t.onSubmit}},[t._v("저장")])],1):o("div",{staticClass:"page-btn"},[t.isProcessComplete?o("span",[o("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:t.showHistory}},[t._v("이력관리")]),t._v(" "),o("b-button",{attrs:{type:"button",variant:"outline-secondary",to:{name:"Pop 관리"}}},[t._v("목록")])],1):o("span",[o("b-button",{staticClass:"float-left",attrs:{type:"button",variant:"outline-secondary"},on:{click:t.onDelete}},[t._v("삭제")]),t._v(" "),o("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:t.onDeploy}},[t._v("배포")]),t._v(" "),o("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:t.showHistory}},[t._v("이력관리")]),t._v(" "),o("b-button",{attrs:{type:"button",variant:"outline-secondary",to:{name:"Pop 관리"}}},[t._v("목록")]),t._v(" "),o("b-button",{attrs:{type:"button",variant:"primary"},on:{click:t.onEdit}},[t._v("수정")])],1)]),t._v(" "),o("b-modal",{attrs:{size:"lg",title:"이력관리"},model:{value:t.isModalHistory,callback:function(e){t.isModalHistory=e},expression:"isModalHistory"}},[o("section",{staticClass:"board"},[o("b-table",{attrs:{hover:"","show-empty":"",items:t.history.items,fields:t.history.fields,"current-page":t.history.pageInfo.page,"per-page":t.history.pageInfo.size},scopedSlots:t._u([{key:"histMgmtId",fn:function(e){return[o("a",{attrs:{href:t.getHistoryLink(e.value),target:"_blank"}},[t._v("보기")])]}}])})],1),t._v(" "),o("b-pagination",{staticClass:"mt-2",attrs:{"total-rows":t.history.pageInfo.totalCount,"per-page":t.history.pageInfo.size},model:{value:t.history.pageInfo.page,callback:function(e){t.history.pageInfo.page=e},expression:"history.pageInfo.page"}}),t._v(" "),o("div",{slot:"modal-footer"},[o("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(e){t.isModalHistory=!1}}},[t._v("확인")])],1)],1),t._v(" "),o("b-modal",{class:"modal-"+t.modal.type,attrs:{title:"Message",size:"sm"},model:{value:t.modal.open,callback:function(e){t.modal.open=e},expression:"modal.open"}},[o("div",{staticClass:"d-block text-center"},[o("p",[t._v(t._s(t.modal.msg))])]),t._v(" "),o("div",{staticClass:"mx-auto",slot:"modal-footer"},[o("b-button",{attrs:{type:"button",variant:"primary"},on:{click:t.modal.action}},[t._v("확인")]),t._v(" "),o("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:function(e){t.modal.open=!1}}},[t._v("취소")])],1)])],1)},s=[],a={render:i,staticRenderFns:s};e.a=a}});